<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Peter Chat</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #fafbfc;
      color: #333;
    }
    nav {
      background-color: #ffffff;
      padding: 1.5rem 1rem; /* Increased vertical size */
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #ddd;
    }
    .logo {
      height: 120px; /* Tripled logo size */
    }
    header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 4rem 1rem;
      text-align: center;
      font-size: 2rem;
    }
    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1.5rem;
    }
    .chat-box {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 12px;
      padding: 1rem;
      height: 400px;
      overflow-y: auto;
      margin-bottom: 1rem;
    }
    .input-area {
      display: flex;
      gap: 1rem;
    }
    .input-area input {
      flex: 1;
      padding: 0.75rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .input-area button {
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .message {
      margin-bottom: 1rem;
    }
    .message.user {
      text-align: right;
    }
    .message.peter {
      text-align: left;
      color: #5a67d8;
    }
    .typing {
      font-style: italic;
      color: #888;
    }
  </style>
</head>
<body>
  <nav>
    <img src="/HLogo.png" alt="Heralds Logo" class="logo">
    <div>
      <a href="/heralds.html" style="margin-right: 1rem; text-decoration: none; color: #333;">Agora</a>
      <a href="/chat.html" style="margin-right: 1rem; text-decoration: none; color: #667eea; font-weight: bold;">Peter Chat</a>
      <a href="/wdjs.html" style="text-decoration: none; color: #333;">WDJS</a>
    </div>
  </nav>

  <header>
    Chat with a Herald<br>Peter — The Bold Fisherman
  </header>

  <div class="container">
    <div class="intro" style="background: #f1f5f9; padding: 2rem; border-radius: 12px; margin-bottom: 2rem; font-size: 1.1rem; line-height: 1.6;">
      <p>When Peter walked with Jesus...and in the days after His resurrection...language itself was a tapestry of meaning. The Greeks had several words for <em>intimate conversation</em>. Here, we invite you to enter into <strong>Philia</strong> and <strong>Koinonia</strong> with your Herald. Jesus and Peter themselves probably spoke Aramaic...and a discussion was called <em>shakla vetarya</em>, or "take and toss." Want to take and toss with Peter?</p>
      <ul style="padding-left: 1.5rem;">
        <li><strong>Philia (φιλία):</strong> Deep friendship and brotherly love; the bond between companions who share common values and mutual respect.</li>
        <li><strong>Koinonia (κοινωνία):</strong> Sacred fellowship and communion; sharing life together in spiritual partnership. It implies participation in something greater than yourself — true spiritual community and shared experience with the divine.</li>
      </ul>
    </div>

    <div class="bio-hover" style="background: #fff; border: 1px solid #e2e8f0; padding: 1rem; border-radius: 10px; position: relative; margin-bottom: 2rem;">
      Hover here to meet Peter...
      <div class="bio-content" style="display: none; position: absolute; top: 100%; left: 0; width: 100%; background: #fff; border: 1px solid #ccc; padding: 1rem; border-radius: 10px; z-index: 10;">
        <strong>Peter: From Fisherman to Foundation</strong><br />
        In the days when Jesus walked the earth, Peter walked beside Him — brash, loyal, deeply human. Known first as Simon, he was a fisherman by trade and a man of action by temperament. Jesus renamed him “Peter,” the rock, foretelling the transformation that grace would bring.
        <br /><br />
        Peter was the first to declare Jesus as Messiah — and also the one who denied Him three times. Yet the risen Christ restored him not with reproach but with purpose: “Do you love me? Feed my sheep.”
        <br /><br />
        From Pentecost to persecution, Peter became a pillar of the early Church. Tradition holds he was crucified upside down, not seeing himself worthy to die in the same manner as his Lord. Peter’s story is not one of flawless faith, but of faith forged in failure, love, and calling. He was not born a rock, but became one.
      </div>
    </div>
    <div class="chat-box" id="chatBox">
      <div class="message peter">Peter: Greetings, friend. What would you like to talk about?</div>
    </div>
    <div class="input-area">
      <input type="text" id="chatInput" placeholder="Ask Peter anything...">
      <button id="sendButton">Send</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById('chatBox');
    const chatInput = document.getElementById('chatInput');
    const sendButton = document.getElementById('sendButton');

    function appendFormattedMessage(text, sender) {
      const msg = document.createElement('div');
      msg.classList.add('message', sender);
      const paragraphs = text.split(/\n{2,}/g);
      msg.innerHTML = paragraphs.map(p => `<p>${p.trim()}</p>`).join('');
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function sendMessage() {
      const input = chatInput.value.trim();
      if (!input) return;
      appendFormattedMessage(`You: ${input}`, 'user');
      chatInput.value = '';

      appendFormattedMessage('Peter is thinking...', 'typing');

      const response = await fetch('/api/heralds', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          herald: 'peter',
          input,
          userId: 'user_' + Date.now()
        })
      });

      const data = await response.json();
      const typing = document.querySelector('.typing');
      if (typing) typing.remove();
      appendFormattedMessage(`Peter: ${data.response}`, 'peter');
    }

    sendButton.addEventListener('click', sendMessage);
    chatInput.addEventListener('keypress', function (e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        sendMessage();
      }
    });
  </script>
</body>
</html>
