<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Peter Chat - Heralds</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      background: #fafbfc;
      color: #333;
    }
    header {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      padding: 2rem 1rem;
      text-align: center;
    }
    .container {
      max-width: 800px;
      margin: 2rem auto;
      padding: 0 1.5rem;
    }
    .intro {
      background: #f1f5f9;
      padding: 2rem;
      border-radius: 12px;
      margin-bottom: 2rem;
      font-size: 1.1rem;
      line-height: 1.6;
    }
    .intro ul {
      padding-left: 1.5rem;
    }
    .intro li {
      margin-bottom: 0.75rem;
    }
    .bio-hover {
      background: #fff;
      border: 1px solid #e2e8f0;
      padding: 1rem;
      border-radius: 10px;
      position: relative;
      margin-bottom: 2rem;
    }
    .bio-hover:hover .bio-content {
      display: block;
    }
    .bio-content {
      display: none;
      position: absolute;
      top: 100%;
      left: 0;
      width: 100%;
      background: #fff;
      border: 1px solid #ccc;
      padding: 1rem;
      border-radius: 10px;
      z-index: 10;
    }
    .chat-box {
      background: #fff;
      border: 1px solid #ccc;
      border-radius: 12px;
      padding: 1rem;
      height: 400px;
      overflow-y: auto;
      margin-bottom: 1rem;
    }
    .input-area {
      display: flex;
      gap: 1rem;
    }
    .input-area input {
      flex: 1;
      padding: 0.75rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
    }
    .input-area button {
      padding: 0.75rem 1.25rem;
      font-size: 1rem;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .message {
      margin-bottom: 1rem;
    }
    .message.user {
      text-align: right;
    }
    .message.peter {
      text-align: left;
      color: #5a67d8;
    }
    .typing {
      font-style: italic;
      color: #888;
    }
  </style>
  <style>
    @media (max-width: 600px) {
      nav {
        flex-direction: column;
        align-items: flex-start;
      }
      nav div {
        margin-bottom: 0.5rem;
      }
    }
  </style>
</head>
<body>
  <nav style="background: #ffffff; padding: 1rem; border-bottom: 1px solid #ddd; display: flex; align-items: center; justify-content: space-between;">
    <div style="display: flex; align-items: center; gap: 1rem;">
      <a href="/" style="text-decoration: none; color: #333; font-weight: bold; font-size: 1.25rem; display: flex; align-items: center;">
        <img src="/HLogo.png" alt="Heralds Logo" style="height: 40px; margin-right: 0.5rem;" /> Heralds
      </a>
    </div>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
      <a href="/heralds.html" style="text-decoration: none; color: #555; font-weight: 500;">Agora</a>
      <a href="/wdjs.html" style="text-decoration: none; color: #555; font-weight: 500;">WDJS</a>
      <a href="/chat.html" style="text-decoration: none; font-weight: 500; color: #667eea; border-bottom: 2px solid #667eea;">Peter Chat</a>
    </div>
  </nav>
  <header>
    <h1>Chat with a Herald</h1>
    <p>Peter — The Bold Fisherman</p>
  </header>
  <div class="container">
    <div class="intro">
      <p>When Peter walked with Jesus...and in the days after His resurrection...language itself was a tapestry of meaning. The Greeks had several words for <em>intimate conversation</em>. Here, we invite you to enter into <strong>Philia</strong> and <strong>Koinonia</strong> with your Herald.  Jesus and Peter themselves probably spoke Aramaic...and a discussion was called "shakla vetarya," or "take and toss."  Want to take and toss with Peter?</p>
      <ul>
        <li><strong>Philia (φιλία):</strong> Deep friendship and brotherly love; the bond between companions who share common values and mutual respect.</li>
        <li><strong>Koinonia (κοινωνία):</strong> Sacred fellowship and communion; sharing life together in spiritual partnership. It implies participation in something greater than yourself — true spiritual community and shared experience with the divine.</li>
      </ul>
    </div>

    <div class="bio-hover">
  Hover here to meet Peter...
  <div class="bio-content">
    <strong>Peter: From Fisherman to Foundation</strong><br />
    In the days when Jesus walked the earth, Peter walked beside Him — brash, loyal, deeply human. Known first as Simon, he was a fisherman by trade and a man of action by temperament. Jesus renamed him “Peter,” the rock, foretelling the transformation that grace would bring.
    <br /><br />
    Peter was the first to declare Jesus as Messiah — and also the one who denied Him three times. Yet the risen Christ restored him not with reproach but with purpose: “Do you love me? Feed my sheep.”
    <br /><br />
    From Pentecost to persecution, Peter became a pillar of the early Church. Tradition holds he was crucified upside down, not seeing himself worthy to die in the same manner as his Lord. Peter’s story is not one of flawless faith, but of faith forged in failure, love, and calling. He was not born a rock, but became one.
  </div>
</div>

    <div class="chat-box" id="chatBox">
      <div class="message peter">Peter: Greetings, friend. What would you like to talk about?</div>
    </div>

    <div class="input-area">
      <input type="text" id="chatInput" placeholder="Ask Peter anything..." />
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById('chatBox');
    const chatInput = document.getElementById('chatInput');

    function appendMessage(text, sender) {
      const msg = document.createElement('div');
      msg.classList.add('message', sender);
      msg.textContent = text;
      chatBox.appendChild(msg);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    async function sendMessage() {
      const input = chatInput.value.trim();
      if (!input) return;
      appendMessage(`You: ${input}`, 'user');
      chatInput.value = '';

      appendMessage('Peter is thinking...', 'typing');

      const response = await fetch('/api/heralds', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          herald: 'peter',
          input,
          userId: 'user_' + Date.now()
        })
      });

      const data = await response.json();
      const typing = document.querySelector('.typing');
      if (typing) typing.remove();
      appendMessage(`Peter: ${data.response}`, 'peter');
    }
    chatInput.addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      sendMessage();
    }
  });

  function appendFormattedMessage(text, sender) {
    const msg = document.createElement('div');
    msg.classList.add('message', sender);
    const paragraphs = text.split(/
{2,}/g);
    msg.innerHTML = paragraphs.map(p => `<p>${p.trim()}</p>`).join('');
    chatBox.appendChild(msg);
    chatBox.scrollTop = chatBox.scrollHeight;
  }

  // Override appendMessage to use formatted version
  appendMessage = appendFormattedMessage;
</script>
</body>
</html>
